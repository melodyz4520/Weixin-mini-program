<view class="page">
  <view class="header">
    <view class="header__back" bindtap="onBack">â†</view>
    <text class="header__title">å‘ç°å¯¼å¸ˆä¸è¯¾ç¨‹</text>
  </view>

  <view class="tabs">
    <view class="tab {{browseMode === 'course' ? 'tab--active' : ''}}" bindtap="onBrowseCourse">æŒ‰è¯¾ç¨‹æµè§ˆ</view>
    <view class="tab {{browseMode === 'tutor' ? 'tab--active' : ''}}" bindtap="onBrowseTutor">æŒ‰å¯¼å¸ˆæµè§ˆ</view>
  </view>

  <view class="search-wrap">
    <text class="search-icon">ğŸ”</text>
    <input class="search-input" placeholder="æœç´¢è¯¾ç¨‹ç¼–å·æˆ–å¯¼å¸ˆå§“å" value="{{searchKeyword}}" bindinput="onSearchInput" />
  </view>

  <scroll-view class="scroll" scroll-y wx:if="{{browseMode === 'tutor'}}">
    <view class="tutor-list">
      <view class="tutor-card" wx:for="{{filteredTutors}}" wx:key="id">
        <view class="tutor-card__left">
          <view class="tutor-card__avatar">ğŸ‘¤</view>
          <view class="tutor-card__info">
            <text class="tutor-card__name">{{item.name}}</text>
            <text class="tutor-card__meta">{{item.major}}{{item.certified ? 'Â·å·²è®¤è¯' : ''}}</text>
            <view class="tutor-card__rating">
              <text wx:if="{{item.rating}}" class="star">â˜…</text>
              <text wx:if="{{item.rating}}" class="rating">{{item.rating}} ({{item.reviewCount}})</text>
              <text wx:else class="rating-new">New</text>
            </view>
            <view class="tutor-card__tags">
              <text class="tag" wx:for="{{item.courses}}" wx:key="*this" wx:for-item="c">{{c}}</text>
            </view>
            <text class="tutor-card__free">æœ€è¿‘ç©ºé—²æ—¶é—´: {{item.nextFree}}</text>
          </view>
        </view>
        <view class="tutor-card__right">
          <button class="btn-book {{item.available ? '' : 'btn-book--disabled'}}" disabled="{{!item.available}}" data-id="{{item.id}}"
            bindtap="onBookTutor">{{item.available ? 'ç«‹å³é¢„çº¦' : 'æš‚æ— ç©ºé—²'}}</button>
        </view>
      </view>
    </view>
  </scroll-view>

  <scroll-view class="scroll" scroll-y wx:if="{{browseMode === 'course'}}">
    <view class="section">
      <text class="section-title">çƒ­é—¨å­¦ç§‘åˆ†ç±»</text>
      <view class="subject-grid">
        <view class="subject-card" wx:for="{{subjects}}" wx:key="id" data-title="{{item.title}}" bindtap="onSubjectTap"
          style="background: {{item.bg}}">
          <text class="subject-icon">{{item.icon}}</text>
          <text class="subject-title">{{item.title}}</text>
          <text class="subject-count">{{item.count}} ä½å¯¼å¸ˆ</text>
        </view>
      </view>
    </view>
    <view class="section">
      <text class="section-title">çƒ­é—¨è¯¾ç¨‹åˆ†ç±»</text>
      <view class="course-list">
        <view class="course-row" wx:for="{{courses}}" wx:key="id">
          <view class="course-row__left">
            <view class="course-tag">{{item.id}}</view>
            <view class="course-info">
              <text class="course-name">{{item.name}}</text>
              <text class="course-desc">{{item.desc}}</text>
              <text class="course-online">{{item.onlineCount}}ä½å¯¼å¸ˆåœ¨çº¿</text>
            </view>
          </view>
          <view class="btn-view" data-name="{{item.name}}" bindtap="onViewTutorsByCourse">æŸ¥çœ‹å¯¼å¸ˆ</view>
        </view>
      </view>
    </view>
  </scroll-view>

  <view class="tabbar">
    <view class="tabbar-item tabbar-item--active">
      <text class="tabbar-icon">ğŸ”</text>
      <text class="tabbar-text">æ‰¾å¯¼å¸ˆ</text>
    </view>
    <view class="tabbar-item" bindtap="onProfile">
      <text class="tabbar-icon">ğŸ‘¤</text>
      <text class="tabbar-text">ä¸ªäººä¸­å¿ƒ</text>
    </view>
  </view>
</view>
